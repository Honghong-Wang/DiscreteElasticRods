#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QTimer>
#include <QElapsedTimer>

#include "GLWindow.h"
#include "Scene.h"

namespace Ui {
    class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
	//----------------------------------------------------------------------------------------------------------------------
	/// @brief ctor
	/// @param[in] parent the parent window
	//----------------------------------------------------------------------------------------------------------------------
    explicit MainWindow(QWidget *parent = 0);
	//----------------------------------------------------------------------------------------------------------------------
	/// @brief dtor
	//----------------------------------------------------------------------------------------------------------------------
	~MainWindow();

private:
	//----------------------------------------------------------------------------------------------------------------------
    /// @brief our user interface
	//----------------------------------------------------------------------------------------------------------------------
	Ui::MainWindow *m_ui;
	//----------------------------------------------------------------------------------------------------------------------
    /// @brief our open gl renderer
	//----------------------------------------------------------------------------------------------------------------------
	GLWindow *m_gl;
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief our scene
    //----------------------------------------------------------------------------------------------------------------------
    Scene* m_scene;

    //----------------------------------------------------------------------------------------------------------------------
    /// @brief the update timer
    //----------------------------------------------------------------------------------------------------------------------
    QTimer m_updateTimer;
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief the timer used for fps measuring
    //----------------------------------------------------------------------------------------------------------------------
    QElapsedTimer m_chronometer;


    int m_frame;
    QString m_exportDir;
    QString m_exportGeoDir;
    QString m_exportCurvDir;

private slots :
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief timer event trigered updateTimer
    //----------------------------------------------------------------------------------------------------------------------
    void timerEvent();
	//----------------------------------------------------------------------------------------------------------------------
	/// @brief slot to toggle the sim on and off
	//----------------------------------------------------------------------------------------------------------------------
    void toggleSim(bool s);
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief set update timer interval
    //----------------------------------------------------------------------------------------------------------------------
    void setTimerUpdateDuration(int ms);
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief slot to export current state of simulation
    //----------------------------------------------------------------------------------------------------------------------
    void exportSim(bool v);
	//----------------------------------------------------------------------------------------------------------------------
    /// @brief slot to pick the selected object
	//----------------------------------------------------------------------------------------------------------------------
    void selectRenderObject(int index);

    void selectExportDirectory();

private:
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief populate combo with selectable objects
    //----------------------------------------------------------------------------------------------------------------------
    void populateUI();

    //----------------------------------------------------------------------------------------------------------------------
    /// @brief start the simulation timer
    //----------------------------------------------------------------------------------------------------------------------
    void startSim();
    //----------------------------------------------------------------------------------------------------------------------
    /// @brief stop the simulation timer
    //----------------------------------------------------------------------------------------------------------------------
    void stopSim();

    void exportFrame();


};

#endif // MAINWINDOW_H
